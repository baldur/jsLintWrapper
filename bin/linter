// this is a goofy way of detecting the library relative path
var path = environment['java.class.path'].replace('lib/external/js.jar','');

load( path + 'lib/external/json2.js' );
load( path + 'lib/external/jslint.js' );
load( path + 'src/Returner.js' );
load( path + 'src/jsFile.js' );
load( path + 'src/jsLintWrapper.js' );

CONF = {};

eval(arguments[0]);

CONF.SETTINGS = eval( readFile( commandlineOptions.configFile ) );

if(CONF.SETTINGS) {
  print('Using user settings');
} else {
  print('loading precooked settings');
  load( path + 'conf/settings.js' );
}

jsLintWrapper.main( eval(arguments[0]) );

